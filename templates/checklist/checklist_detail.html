<!DOCTYPE HTML>
<html>
<body>
{% load url from future %}

{% block content %}

<a href="/checklist/home/">Home page</a>

{% if checklist %}
	{% if error_message %}<p><span style="color:red;font-weight:bold">{{ error_message }}</span></p>{% endif %}
	
	<h1><span style="color:green;font-weight:bold">Checklist Detail Table</span></h1>
	<table border="1">
		<tr><th>Field</th><th>Detail</th></tr>
		<tr><td>Title</td><td>{{ checklist.title }}</td></tr>		
		<tr><td>Status</td><td>{{ checklist.status }}</td></tr>
		<tr><td>Assignee</td><td>{{ checklist.assignee.username }}</td></tr>
		<tr><td>File number</td><td>{{ checklist.fileNum }}</td></tr>
		<tr><td>Description</td><td>{{ checklist.description }}</td></tr>
		<tr><td>Created Date</td><td>{{ checklist.create_date }}</td></tr>				
		<tr><td>Land District</td><td>{{ checklist.landDistrict }}</td></tr>
		<tr><td>Address</td><td>{{ checklist.address }}</td></tr>
	</table>

	<fieldset>

	<h1><span style="color:green;font-weight:bold">Item Selection Table</span></h1>
	<form action="/checklist/{{ checklist.id }}/validate/" method="post">
	{% csrf_token %}

	<table border="1">
		<tr><th>Item name</th><th>Status</th></tr>
		{% for item in checklist.item_set.all %}
		<tr>
			<td>{{ item.item }}</td>
			{% if checklist.status != "S" and checklist.status != "A" %}
				<td><input type="radio" name="{{ item.id }}" value="U" {% if item.itemStatus == "U" %}checked="true"{% endif %}/>Unanswered
					<input type="radio" name="{{ item.id }}" value="Y" {% if item.itemStatus == "Y" %}checked="true"{% endif %}/>Yes
					<input type="radio" name="{{ item.id }}" value="N" {% if item.itemStatus == "N" %}checked="true"{% endif %}/>NA
				</td>
			{% else %}
				<td>{{ item.itemStatus }}</td>
			{% endif %}	
		</tr>
		{% empty %}
			<li>No item in this list.</li>
		{% endfor %}
	</table>

	{% if checklist.status != "S" and checklist.status != "A" %}
		<input type="submit" value="Save and Validate" style="text-align:center;"/>
	{% endif %}

	{% if validate_message %}
		{% if is_validated %}<p><span style="color:green;font-weight:bold">{{ validate_message }}</span></p>
		{% else %}<p><span style="color:red;font-weight:bold">{{ validate_message }}</span></p>
		{% endif %}
	{% endif %}
	</form>

	<form action="/checklist/{{checklist.id}}/" method="post">
	{% csrf_token %}
	{% if checklist.status != "S" and checklist.status != "A" %}
		<input type="submit" value="Reset"/>
	{% endif %}
	</form>
	
	<form action="/checklist/{{checklist.id}}/submit/" method="post">
	{% csrf_token %}
		{% if checklist.status != "S" and checklist.status != "A" %}
			<input type="submit" value="Validate and Submit for Review" />
		{% endif %}
		
		{% if submit_message %}
			{% if is_submited %}<p><span style="color:green;font-weight:bold">{{ submit_message }}</span></p>
			{% else %}<p><span style="color:red;font-weight:bold">{{ submit_message }}</span></p>
			{% endif %}
		{% endif %}
	
	</form>
	</fieldset>
{% else %}
    <p>Can't find checklist.</p>
{% endif %}


{% endblock %}
</body>
</html>

